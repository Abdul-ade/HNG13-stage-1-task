<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Contact Form</title>
    <style>
        span{
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .error {
            color: red;
            font-size: 0.9rem;
            margin: 0;
            display: none;
        }
        form{
            display: flex;
            flex-flow: column nowrap;
            max-width: 30rem;
            margin: 0 auto;
            padding: 0.8rem 1.2rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            font-family: Arial, sans-serif;
        }
        h1{
            margin: 1.2rem 0;
        }
        label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        input, textarea {
            margin-bottom: 1.2rem;
            padding: 0.4rem 0.8rem;
            border: 1px solid #ccc;
            border-radius: 10px;
            font-size: 1rem;
            font-family: Arial, sans-serif;
        }
        button {
            padding: 0.6rem 1.2rem;
            border: none;
            margin: 0 auto;
            width: 6rem;
            border-radius: 5px;
            background-color: #000000af;
            color: white;
            font-size: 1rem;
            cursor: pointer;
        }
        button:hover {
            background-color: #000000;
        }
        article {
            font-family: Arial, sans-serif;
            background-color: #eee;
            max-width: 24rem;
            display: none;
            margin: 2rem auto;
            padding: 1.2rem;
            border: 1px solid #ccc;
            border-radius: 7px;
        }
        /* QUERIES */
         @media (max-width: 76em){
            html{
                font-size: 80%;
            }
        }
        @media (max-width: 60em){
            html{
                font-size: 70%;
            }
        }
        @media (max-width: 44em){
            html{
                font-size: 60%;
            }
              }

        
    </style>
</head>
<body>
    <form action="" method="post">
        <h1>Contact</h1>
        <span>
            <label for="fullName">Full name</label>
            <p class="error" data-testid="test-contact-error-name">error</p>
        </span>
        <input data-testid="test-contact-name" id="fullName" name="fullName" type="text" placeholder="Full Name">
        
        <span>
            <label for="email">Email</label>
            <p class="error" data-testid="test-contact-error-email">error</p>
        </span>
        <input data-testid="test-contact-email" id="email" name="email" type="text" placeholder="you@example.com">
        
        <span>
            <label for="subject">Subject</label>
            <p class="error" data-testid="test-contact-error-subject">error</p>
        </span>
        <input data-testid="test-contact-subject" id="subject" name="subject" type="text" placeholder="Subject">
        
        <span>
            <label for="message">Message</label>
            <p class="error" data-testid="test-contact-error-message">error</p>
        </span>
        <textarea data-testid="test-contact-message" id="message" name="message" placeholder="Your message here..."></textarea>

        <button type="submit">Submit</button>
    </form>
    <article data-testid="test-contact-success">
        <h3>Thank you, <span id="successName"></span> for reaching out!</h3>
        <p>We have received your message and will get back to you shortly.</p>
    </article>
    <script>
        (() => {
            const form = document.querySelector('form');
            const nameInput = document.querySelector('[data-testid="test-contact-name"]');
            const emailInput = document.querySelector('[data-testid="test-contact-email"]');
            const subjectInput = document.querySelector('[data-testid="test-contact-subject"]');
            const messageInput = document.querySelector('[data-testid="test-contact-message"]');

            const errName = document.querySelector('[data-testid="test-contact-error-name"]');
            const errEmail = document.querySelector('[data-testid="test-contact-error-email"]');
            const errSubject = document.querySelector('[data-testid="test-contact-error-subject"]');
            const errMessage = document.querySelector('[data-testid="test-contact-error-message"]');

            const successArticle = document.querySelector('[data-testid="test-contact-success"]');
            const successName = document.getElementById('successName');

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            function showError(el, msg) {
                el.textContent = msg;
                el.style.display = 'flex';
                el.style.justifyContent = 'flex-end';
                el.style.color = 'red';
            }

            function clearError(el) {
                el.textContent = '';
                el.style.display = 'none';
            }

            function validate() {
                let valid = true;
                const name = nameInput.value.trim();
                const email = emailInput.value.trim();
                const subject = subjectInput.value.trim();
                const message = messageInput.value.trim();

                clearError(errName);
                clearError(errEmail);
                clearError(errSubject);
                clearError(errMessage);

                if (!name) {
                    showError(errName, 'Full name is required.');
                    valid = false;
                } else if (name.length < 2) {
                    showError(errName, 'Please enter a valid name.');
                    valid = false;
                }

                if (!email) {
                    showError(errEmail, 'Email is required.');
                    valid = false;
                } else if (!emailRegex.test(email)) {
                    showError(errEmail, 'Please enter a valid email address.');
                    valid = false;
                }

                if (!subject) {
                    showError(errSubject, 'Subject is required.');
                    valid = false;
                } else if (subject.length < 3) {
                    showError(errSubject, 'Subject is too short.');
                    valid = false;
                }

                if (!message) {
                    showError(errMessage, 'Message is required.');
                    valid = false;
                } else if (message.length < 10) {
                    showError(errMessage, 'Message must be at least 10 characters.');
                    valid = false;
                }

                return valid;
            }

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                if (validate()) {
                    successName.textContent = nameInput.value.trim();
                    form.style.display = 'none';
                    successArticle.style.display = 'block';
                    // optionally clear fields
                    nameInput.value = '';
                    emailInput.value = '';
                    subjectInput.value = '';
                    messageInput.value = '';
                }
            });

            // live validation: clear each error when the user types
            [
                [nameInput, errName],
                [emailInput, errEmail],
                [subjectInput, errSubject],
                [messageInput, errMessage],
            ].forEach(([input, err]) => {
                input.addEventListener('input', () => clearError(err));
            });
        })();
    </script>
</body>
</html>